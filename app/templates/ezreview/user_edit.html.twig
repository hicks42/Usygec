{% extends 'ezreview_base.html.twig' %}

{% block title %}Modification du compte
{% endblock %}
{% block javascripts %}
	{{ parent() }}
	{{ encore_entry_script_tags('collection') }}
{% endblock javascripts %}
{% block content %}

	{% import "ezreview/macros/forms.html.twig" as formMacros %}

	<h3>Modifier votre compte</h3>
	<a href="{{ path('account') }}" class="btn btn-secondary btn w-3">
		<i class="fa-solid fa-angles-left"></i>
		Retour</a>
	<div class="my-3">
		{{ form_start(form, {"method": "PATCH"}) }}
		<div class="bg-light rounded overflow-hidden my-3 p-2">
			{{ form_row(form.company) }}
		</div>
		<div class="row">
			<div class="col-md-12 p-3 mt-3">
				<h4>Etablissements :</h4>
				{% for row in form.structures %}
					<div class="etbl col-md-12 mt-3">
						{{ formMacros.niceForm(row) }}
					</div>
				{% endfor %}
				<ul class="structures" data-index="{{ form.structures|length > 0 ? form.structures|last.vars.name + 1 : 0 }}" data-prototype="{{ formMacros.newForm(form.structures.vars.prototype)|e('html_attr') }}"></ul>
				<button type="button" class="add_item_link btn btn-secondary w-3 mt-2" data-collection-holder-class="structures">Ajouter un Ã©tablissement</button>
			</div>
			{% do form.company.setRendered %}
			{% if form.structures|length == 0  %}
				{% do form.structures.setRendered %}
			{% endif %}
		</div>
		<button type="submit" class="btn btn-primary btn-lg btn-block">
			Enregistrer les modifications
		</button>
		{{ form_end(form) }}
	</div>
{% endblock %}
